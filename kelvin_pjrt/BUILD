cc_binary(
    name = "pjrt_c_api_kelvin_plugin.so",
    srcs = ["pjrt_c_api_kelvin_plugin.cc"],
    deps = [
        "@xla//xla/pjrt/c:pjrt_c_api_hdrs",
        "@xla//xla/pjrt/c:pjrt_c_api_wrapper_impl",
        "@xla//xla/pjrt:pjrt_client",
        "@xla//xla/tsl/platform:status",
        "@llvm-project//mlir:AffineToStandard",
        "@llvm-project//mlir:ArithToLLVM",
        "@llvm-project//mlir:ControlFlowToLLVM",
        "@llvm-project//mlir:FuncToLLVM",
        "@llvm-project//mlir:LLVMCommonConversion",
        "@llvm-project//mlir:LinalgTransforms",
        "@llvm-project//mlir:SCFToControlFlow",
        "@llvm-project//mlir:Transforms",
        "@stablehlo//:stablehlo_ops",
        "@stablehlo//:stablehlo_passes",
        "@stablehlo//:linalg_passes",
        "@xla//xla/mlir_hlo:all_passes",
        # "@xla//xla/mlir_hlo:hlo_passes",
    ],
    linkshared = True,
)
